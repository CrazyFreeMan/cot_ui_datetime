<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>UI_date/time by macik</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>UI_date/time</h1>
          <h2>Расширение для Cotonti CMF</h2>
	  <div class="right">
	<a href="index.html"><img src="images/en.png">&nbsp;English</a> |
	<a href="index_ru.html"><img src="images/ru.png">&nbsp;Русский</a>
	</div>

        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/macik/cot_ui_datetime/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/macik/cot_ui_datetime/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/macik/cot_ui_datetime" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>UI_datetime</h1>
<p>(перейти на <a href="demo.html">демонстрационную страницу</a>)</p>

<p>Это расширение (плагин) для системы управления сайтом Cotonti. Цель этого 
расширения заменить стандартные элементы интерфейса для выбора даты/времени 
на более удобные и современные.</p>

<h2>Описание</h2>

<p>Стандартные для Cotonti элементы выбора даты/времени представляют из себя
набор выпадающих меню, через которые пользователь может выбрать дату
последовательно установив год, месяц, день, часы, минуты. Данный плагин
призван заменить отдельные выпадающие меню на единые поля выбора даты
и времени, позволяя при этом либо ввести дату/время в привычном формате
(дд.мм.гггг чч:мм), либо быстро «в один клик» выбрать их, используя простые
и понятные всплывающие элементы управления.</p>

<h2>Функционал</h2>

<ul>
<li>Единое поле для выбора даты и времени </li>
<li>Ввод данных в привычном формате, либо быстрый выбор через всплывающий элемент управления</li>
<li>Поддержка интернационализации элемента выбора дат (формат даты, названия дней и месяцев)</li>
<li>Т.к написан с использованием jQueryUI позволяет использовать темы jQueryUI (и переключать 
их на лету через ThemeRoller)</li>
<li>По умолчанию загружается при добавлении/редактировании страниц и при редактировании 
профилей пользователей</li>
<li>Дополнительный режим отслеживания элементов дата/время на всех страницах</li>
<li>Поддерживает работу с экстраполями</li>
</ul>

<h2>Требования</h2>

<ul>
<li>Cotonti Siena (0.9.x).</li>
<li>jQuery версии 1.6 или выше</li>
<li>Библиоека jQueryUI (поставляется с плагином) с компонентами <code>datepicker</code> и <code>slider</code>.  </li>
</ul>

<h2>Демонстрационная страница</h2>

<p>You can see demonstration how extension works here: <a href="http://macik.github.com/cot_ui_datetime/demo.html">Demo page on GitHub</a></p>

<h2>Информация о текущей версии</h2>

<p>Текущая версия использует:
* <a href="http://www.jqueryui.com">jQueryUI</a> (версии 1.8.23 с темой оформления Redmond).
* <a href="http://trentrichardson.com/examples/timepicker/">jquery.timepicker.js</a> - Timepicker плагин для jQuery от Trent Richardson (используется начиная с версии 
1.6.0 расширения UI_datetime)</p>

<h3>Комментарии</h3>

<p>Плагин не требует специальных настроек и работает сразу после установки.
Протестирован на следующих темах оформления <code>Nemesis</code>, <code>HTML Kickstart</code>,
<code>SymiSun-03</code> и должен работать на всех шаблонах или расширениях, которые
используют стандартные для Cotonti механизмы формирования элементов выбора
даты/времени (функцию cot<em>selectbox</em>date и массив ресурсов
<code>$R['input_date*']</code>.</p>

<p>Если вы все же не используете стандартные средства формирования полей для
выбора даты/времени, то прочтите следующий подраздел, для понимания как
настроить свой код для правильной работы этого расширения.</p>

<h3>Как это работает</h3>

<p>В двух словах плагин работает следующим образом - стандартные (старые)
элементы скрываются от пользователя через внедренные (inline) стили,
но продолжают оставаться на странице для полноценной передачи параметров
на сервер при отправке страницы (сохранении данных). А новые элементы,
использующие jQueryUI динамически создаются на месте «старых».</p>

<p>Реализовано это достаточно просто, путем замены стандартных строк ресурсов
<code>$R['input_date']</code> и <code>$R['input_date_short']</code>, которые являются шаблонами для
формирования элементов интерфейса.</p>

<p>Плагин ui_date/time использует следующий ('short') шаблон для даты:</p>

<pre><code>&lt;div class="uidt mode-date" style="display:inline;"&gt;
    &lt;div class="common_date" style="display:none;"&gt;
        {$day} {$month} {$year}
    &lt;/div&gt;
    &lt;div style="display:inline;" class="date_target"&gt;
    &lt;/div&gt;
&lt;/div&gt; 
</code></pre>

<p>Основные преобразования интерфейса происходят после загрузки страницы.
JS скрипт ищет на загруженной странице все блоки с классами <code>uidt</code>,
анализирует их и связывает с новыми элементами, которые
создаются в контейнерах с классами <code>date_target</code> и <code>time_target</code> соответственно.</p>

<p>Вид «новых» элементов ввода (<code>&lt;input&gt;</code>) определяется шаблоном. См. секцию <code>NEWINPUT</code>
в файле <code>ui_datetime.tpl</code>:</p>

<pre><code>&lt;!-- BEGIN: NEWINPUT --&gt;
&lt;input class="ui_input_tpl form-control" type="text" value="" /&gt;&lt;/div&gt;
&lt;!-- END: NEWINPUT --&gt;
</code></pre>

<p>Здесь вы можете переопределить вид элемента ввода, добавив <em>классы</em> или 
добавив допонительный html код.</p>

<p>Расширение так же поддерживает работу с экстраполями. Поэтому если вы, например к страницам, добавите 
экстраполе с типом <code>datetime</code>, и включите соответствующий тег в шаблоны (page.add.tpl page.edit.tpl),
расширение автоматически их обработает и преобразует к новому виду.</p>

<p>По умолчанию (для снижения нагрузки на сервер) расширение загружается
и работает только на страницах добавления/редактирования статей и при
редактировании профиля пользователей. Вы можете включить режим global mode
в настройках, тогда расширение будет загружаться на всех страницах
и отслеживать все поля ввода дат/времени, вне зависимости от установленных
или используемых расширений.</p>

<h2>Установка</h2>

<ul>
<li>Распаковать архив, скопировать файлы в корневую папку сайта (при этом файлы из папка 
JS должны попасть в папку JS сайта, а файлы из папки plugins соответственно в plugins).</li>
<li>Установить через панель Администрирования → Расширения (<code>Управление сайтом</code> → <code>Расширения</code>)</li>
<li>Если вы уже используете jQueryUI в своем проекте - укажите путь к файлам в настройках плагина.</li>
</ul>

<p><strong>!Внимание:</strong> Если вы обновляетет плагин версии младше 1.6.0 на версию 1.6.0 и старше, то 
потребуется полная деинсталяция плагина, и повторная установка. Обновить плагин через нажатие кнопки 
«Обновить» может быть не достаточно (или как минимум проверьте актуальность пути к файлам новой 
библиотеки <code>js/time_picker</code>). Обратите внимание, что в новой версии используется новая библиотека 
<code>time_picker</code> для отображения диалога выбора времени. Файлы старой библиотеки <code>time_pickr</code> можно удалить.</p>

<h3>Комментарии</h3>

<p>После установки вы можете увидеть работу и протестировать расширение
на странице инструментов администрирования (<code>Управление сайтом</code> → <code>Расширения</code>
→ <code>UI date/time picker</code> → <code>Администрирование</code>). В настройках плагина Вы можете
отдельно включить/отключить элементы для выбора даты и времени.</p>

<h2>Ссылки</h2>

<ul>
<li><a href="http://Cotonti.com/">Cotonti.com</a> -- Сайт CMF Cotonti</li>
<li><a href="http://www.cotonti.com/forums/?m=posts&amp;q=7105">Discussion</a> -- Обсуждание плангина (русская ветка форума)</li>
<li><a href="http://www.cotonti.com/forums?m=posts&amp;q=7118">Discussion</a> -- Обсуждание плангина (английская ветка форума)</li>
</ul>

</section>
        <footer>
          UI_date/time разрабатывает и подерживает <a href="https://github.com/macik">macik</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>
      </div>
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36756015-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    
  </body>
</html>